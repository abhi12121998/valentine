<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üíñ Hug Day ‚Äî Heart Burst Reveal</title>

  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#1a0b2e;
      --glow:#ffb703;
      --pink:#ff4d8d;
      --violet:#8b5cf6;
      --text:#fff;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% 20%, rgba(255,77,141,.20), transparent 60%),
                  radial-gradient(900px 700px at 80% 60%, rgba(139,92,246,.18), transparent 60%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    /* soft floating hearts */
    .bokeh{
      position:fixed; inset:0;
      pointer-events:none;
      overflow:hidden;
      filter: blur(0.2px);
      opacity:.9;
    }
    .bokeh span{
      position:absolute;
      width:14px; height:14px;
      transform: rotate(45deg);
      border-radius:4px;
      opacity:.12;
      animation: floatUp linear infinite;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.9), rgba(255,77,141,.45));
      box-shadow: 0 0 25px rgba(255,77,141,.25);
    }
    .bokeh span::before,.bokeh span::after{
      content:"";
      position:absolute;
      width:14px; height:14px;
      border-radius:50%;
      background: inherit;
      top:-7px; left:0;
    }
    .bokeh span::after{ left:-7px; top:0; }

    @keyframes floatUp{
      from{ transform: translateY(110vh) rotate(45deg) scale(1); }
      to  { transform: translateY(-30vh) rotate(45deg) scale(1.25); }
    }

    .wrap{
      position:relative;
      width:100%;
      height:100%;
      display:grid;
      place-items:center;
      padding:24px;
    }

    .stage{
      position:relative;
      width:min(92vw, 920px);
      aspect-ratio: 4 / 5;
      border-radius:28px;
      overflow:hidden;
      box-shadow: 0 30px 90px rgba(0,0,0,.55);
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(8px);
    }

    /* image layer */
    .photo{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:cover;
      opacity:0;
      transform: scale(1.02);
      filter: saturate(1.05) contrast(1.02);
      transition: opacity 800ms ease, transform 2600ms ease;
    }
    .photo.active{
      opacity:1;
      transform: scale(1.07);
    }

    /* vignette */
    .vignette{
      position:absolute; inset:0;
      background:
        radial-gradient(circle at 50% 40%, rgba(0,0,0,0) 35%, rgba(0,0,0,.45) 100%);
      pointer-events:none;
    }

    /* Heart FX canvas overlay */
    canvas{
      position:absolute; inset:0;
      width:100%; height:100%;
      pointer-events:none;
    }

    /* subtle title */
    .title{
      position:absolute;
      left:18px; top:14px;
      padding:10px 14px;
      border-radius:16px;
      background: rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
      font-weight:700;
      letter-spacing:.2px;
      text-shadow: 0 6px 18px rgba(0,0,0,.35);
    }
    .title small{
      display:block;
      font-weight:600;
      opacity:.85;
      margin-top:2px;
    }

    /* controls */
    .controls{
      position:absolute;
      right:14px; bottom:14px;
      display:flex; gap:10px;
    }
    button{
      appearance:none;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.28);
      color:#fff;
      padding:10px 14px;
      border-radius:14px;
      font-weight:700;
      cursor:pointer;
      backdrop-filter: blur(10px);
      transition: transform .15s ease, background .15s ease;
    }
    button:active{ transform: scale(.96); }
    button:hover{ background: rgba(255,255,255,.08); }

    .counter{
      position:absolute;
      right:16px; top:16px;
      padding:8px 12px;
      border-radius:14px;
      background: rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.10);
      font-weight:700;
      opacity:.9;
    }

    /* mobile tighter */
    @media (max-width:520px){
      .stage{ border-radius:22px; }
      .title{ font-size:14px; }
      button{ padding:10px 12px; }
    }
  </style>
</head>

<body>
  <!-- floating hearts -->
  <div class="bokeh" id="bokeh"></div>

  <div class="wrap">
    <div class="stage" id="stage">
      <div class="title">Hug Day üíõ <small>Heart Burst Reveal</small></div>
      <div class="counter" id="counter">1 / 10</div>

      <!-- 10 images -->
      <img class="photo active" src="./assets/images/hug1.jpeg" alt="hug 1">
      <img class="photo" src="./assets/images/hug2.jpeg" alt="hug 2">
      <img class="photo" src="./assets/images/hug3.jpeg" alt="hug 3">
      <img class="photo" src="./assets/images/hug4.jpeg" alt="hug 4">
      <img class="photo" src="./assets/images/hug5.jpeg" alt="hug 5">
      <img class="photo" src="./assets/images/hug6.jpeg" alt="hug 6">
      <img class="photo" src="./assets/images/hug7.jpeg" alt="hug 7">
      <img class="photo" src="./assets/images/hug8.jpeg" alt="hug 8">
      <img class="photo" src="./assets/images/hug9.jpeg" alt="hug 9">
      <img class="photo" src="./assets/images/hug10.jpeg" alt="hug 10">
      <canvas id="fx"></canvas>
      <div class="vignette"></div>

      <div class="controls">
        <button id="prev">‚óÄ</button>
        <button id="toggle">‚è∏</button>
        <button id="next">‚ñ∂</button>
      </div>
    </div>
  </div>

  <script>
    // ---------- floating hearts background ----------
    (function makeBokeh(){
      const b = document.getElementById('bokeh');
      const count = 18;
      for(let i=0;i<count;i++){
        const s = document.createElement('span');
        const size = 10 + Math.random()*18;
        s.style.width = s.style.height = size + 'px';
        s.style.left = (Math.random()*100) + 'vw';
        s.style.animationDuration = (10 + Math.random()*10) + 's';
        s.style.animationDelay = (-Math.random()*10) + 's';
        s.style.opacity = (0.06 + Math.random()*0.10).toFixed(2);
        b.appendChild(s);
      }
    })();

    // ---------- slideshow ----------
    const photos = Array.from(document.querySelectorAll('.photo'));
    const counter = document.getElementById('counter');
    let idx = 0;
    let playing = true;
    const intervalMs = 4200;
    let timer;

    function setActive(newIdx){
      photos[idx].classList.remove('active');
      idx = (newIdx + photos.length) % photos.length;
      photos[idx].classList.add('active');
      counter.textContent = `${idx+1} / ${photos.length}`;
      // trigger heart burst each slide
      burst();
    }

    function next(){ setActive(idx+1); }
    function prev(){ setActive(idx-1); }

    function play(){
      playing = true;
      document.getElementById('toggle').textContent = '‚è∏';
      timer = setInterval(next, intervalMs);
    }

    function pause(){
      playing = false;
      document.getElementById('toggle').textContent = '‚ñ∂Ô∏è';
      clearInterval(timer);
    }

    document.getElementById('next').addEventListener('click', () => { pause(); next(); });
    document.getElementById('prev').addEventListener('click', () => { pause(); prev(); });
    document.getElementById('toggle').addEventListener('click', () => playing ? pause() : play());

    // tap stage to toggle on mobile
    document.getElementById('stage').addEventListener('click', (e)=>{
      if(e.target.tagName === 'BUTTON') return;
      playing ? pause() : play();
    });

    // ---------- Heart Burst Reveal FX (canvas) ----------
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');

    function resize(){
      const rect = canvas.getBoundingClientRect();
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      canvas.width = Math.floor(rect.width * dpr);
      canvas.height = Math.floor(rect.height * dpr);
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    window.addEventListener('resize', resize);
    resize();

    // heart param
    function heartPoint(t, scale){
      // classic heart curve
      const x = 16*Math.pow(Math.sin(t),3);
      const y = 13*Math.cos(t) - 5*Math.cos(2*t) - 2*Math.cos(3*t) - Math.cos(4*t);
      return { x: x*scale, y: -y*scale };
    }

    let particles = [];
    let animId = null;
    let startTime = 0;

    function burst(){
      cancelAnimationFrame(animId);
      particles = [];
      startTime = performance.now();

      const w = canvas.getBoundingClientRect().width;
      const h = canvas.getBoundingClientRect().height;
      const cx = w*0.5;
      const cy = h*0.46;

      // particles along heart outline
      const outlineCount = 220;
      for(let i=0;i<outlineCount;i++){
        const t = (i/outlineCount) * Math.PI*2;
        const p = heartPoint(t, Math.min(w,h)*0.020);
        const ox = cx + p.x;
        const oy = cy + p.y;

        // outward velocity from center
        const dx = ox - cx;
        const dy = oy - cy;
        const mag = Math.hypot(dx,dy) || 1;

        particles.push({
          x: ox, y: oy,
          vx: (dx/mag) * (0.25 + Math.random()*0.9),
          vy: (dy/mag) * (0.25 + Math.random()*0.9),
          r: 1.2 + Math.random()*1.8,
          life: 900 + Math.random()*900,
          born: startTime,
          kind: 'spark'
        });
      }

      // extra burst sparks from center
      const burstCount = 120;
      for(let i=0;i<burstCount;i++){
        const a = Math.random()*Math.PI*2;
        const sp = 0.6 + Math.random()*2.2;
        particles.push({
          x: cx, y: cy,
          vx: Math.cos(a)*sp,
          vy: Math.sin(a)*sp,
          r: 1.0 + Math.random()*2.2,
          life: 700 + Math.random()*900,
          born: startTime,
          kind: 'burst'
        });
      }

      animate();
    }

    function drawGlowCircle(x,y,r,alpha){
      const g = ctx.createRadialGradient(x,y,0,x,y,r*8);
      g.addColorStop(0, `rgba(255,183,3,${0.55*alpha})`);
      g.addColorStop(0.35, `rgba(255,77,141,${0.28*alpha})`);
      g.addColorStop(1, `rgba(139,92,246,0)`);
      ctx.fillStyle = g;
      ctx.beginPath();
      ctx.arc(x,y,r*8,0,Math.PI*2);
      ctx.fill();
    }

    function drawHeartStroke(progress){
      const w = canvas.getBoundingClientRect().width;
      const h = canvas.getBoundingClientRect().height;
      const cx = w*0.5;
      const cy = h*0.46;
      const scale = Math.min(w,h)*0.020;

      ctx.save();
      ctx.lineWidth = 2.2;
      ctx.shadowBlur = 18;
      ctx.shadowColor = "rgba(255,77,141,0.65)";
      const grad = ctx.createLinearGradient(cx-scale*18, cy-scale*14, cx+scale*18, cy+scale*14);
      grad.addColorStop(0, "rgba(255,183,3,0.95)");
      grad.addColorStop(0.5, "rgba(255,77,141,0.95)");
      grad.addColorStop(1, "rgba(139,92,246,0.95)");
      ctx.strokeStyle = grad;

      ctx.beginPath();
      const steps = 260;
      const maxStep = Math.floor(steps * progress);
      for(let i=0;i<=maxStep;i++){
        const t = (i/steps) * Math.PI*2;
        const p = heartPoint(t, scale);
        const x = cx + p.x;
        const y = cy + p.y;
        if(i===0) ctx.moveTo(x,y);
        else ctx.lineTo(x,y);
      }
      ctx.stroke();
      ctx.restore();
    }

    function animate(){
      const now = performance.now();
      const rect = canvas.getBoundingClientRect();
      ctx.clearRect(0,0,rect.width,rect.height);

      // draw heart stroke (draw-in for first ~1.2s)
      const drawIn = Math.min(1, (now - startTime) / 1200);
      drawHeartStroke(drawIn);

      // particles
      for(const p of particles){
        const age = now - p.born;
        const t = age / p.life;
        if(t >= 1) continue;

        // easing: fast then slow
        const damp = 1 - t;
        p.x += p.vx * 1.8;
        p.y += p.vy * 1.8;

        const alpha = p.kind === 'spark' ? (0.85 * damp) : (0.65 * damp);
        drawGlowCircle(p.x, p.y, p.r, alpha);

        ctx.fillStyle = `rgba(255,255,255,${0.35*alpha})`;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        ctx.fill();
      }

      // keep animating while some particles alive (or during draw-in)
      const alive = particles.some(p => (now - p.born) < p.life);
      if(alive || drawIn < 1){
        animId = requestAnimationFrame(animate);
      }
    }

    // init
    burst();
    play();
  </script>
</body>
</html>
